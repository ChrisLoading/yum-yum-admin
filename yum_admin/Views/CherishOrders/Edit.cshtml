@using yum_admin.Models.DataTransferObject
@model Cherish_CheckDto

@{
	var c = Model;
}
<div class="mx-auto mt-4" style="width:1120px">


	<h5 class="ps-5">詳細資訊</h5>

	@* 第一個表頭區塊  *@
	<div class="rounded-1 shadow d-flex p-3 mb-3" style="height:4.1rem; border:1px solid #aaaaaaa0">

		<h4 class="text-center" style="flex-basis:10%;">@c.TradeStateDescript</h4>
		<div class="text-center" style="flex-basis:10%">|</div>

		<h4 class="text-start" style="flex-basis:10%;">@c.IngredientName</h4>
		<div class="text-center" style="flex-basis:40%"></div>

		<div class="text-end" style="flex-basis:40%">
			異動日期 @(c.ModifyDate.ToString("yyyy-MM-dd"))
		</div>
	</div>

	@* 第二個文字區塊  *@
	<div class="my-2 px-5 position-relative">
		<h4 class="d-inline-block">
			@{
				string text = (c.TradeStateCode == 0 || c.TradeStateCode == 2) ? "已通過" : "審查中";
			}

			備註：@((c.ReasonText is not null ? c.ReasonText : (c.RejectText is not null ? c.RejectText : text)))

		</h4>
		<h5 class="d-inline-block position-absolute end-0 pe-5 pt-1">預定上架日期：@(c.ReserveDate is not null ? ((DateTime)c.ReserveDate!).ToString("yyyy-MM-ss HH:mm") : "無備註")</h5>
	</div>

	@* 第三個表頭區塊  切左右 *@
	<div class="d-flex">

		@* 左邊 食材資料 *@
		<div style="flex-basis:48%;">

			<!-- 表頭方塊 -->
			<div class="rounded-1 shadow d-flex px-5 py-1 mb-3" style="border:1px solid #aaaaaaa0">
				<h4 class="my-2">1. 惜食資料</h4>
			</div>

			<!-- 食材資料標題 -->
			<div class="d-flex mb-2">
				<span class="px-5 fs-4" style="flex-basis:33%;">@c.IngredientName</span>
				<span class=" fs-4 text-center" style="flex-basis:33%;width:8rem;">@c.IngredAttributeName</span>
				<span class="px-5 fs-4" style="flex-basis:33%;">數量 @c.Quantity</span>
			</div>

			<!-- 食材來源 -->
			<div class="px-5 my-0 w-100"><p class="col-3 m-0 d-inline-block">購買來源：</p>@c.ObtainSource</div>
			<div class="px-5 my-0 w-100"><p class="col-3 m-0 d-inline-block">購買日期：</p>@((c.ObtainDate).ToString("yyyy-MM-dd"))</div>
			<div class="px-5 my-0 w-100"><p class="col-3 m-0 d-inline-block" style="letter-spacing:0.37rem;">截止日：</p>@c.EndDate.ToString("yyyy-MM-dd")</div>

			<!-- 有效期限設置 -->
			<div class="px-5 my-0 w-100">
				<p class="col-3 m-0 d-inline-block">有效期限：</p><input type="date" value="@(c.CherishValidDate is null? DateTime.Now.AddDays(3).ToString("yyyy-MM-dd"):((DateOnly)c.CherishValidDate!).ToString("yyyy-MM-dd"))" />
				<p class="text-danger">@(c.CherishValidDate is null ? "未設置（預設3天後，請管理員設置）" : "已設置")</p>
			</div>

		</div>

		@* 分隔線------ *@
		<div style="flex-basis:4%"></div>

		@* 右邊 聯絡資料 *@
		<div style="flex-basis:48%;">

			<!-- 標題 -->
			<div class="rounded-1 shadow d-flex px-5 py-1 mb-3" style="border:1px solid #aaaaaaa0">
				<h4 class="my-2">2. 聯絡資料</h4>
			</div>

			<!-- 內容1.使用者 -->
			<div class="d-flex mb-2">
				<span class="ps-5 fs-4 fw-600" style="flex-basis:50%;">暱稱<span class="ms-2 fs-5 fw-400" style="width:8rem;">@c.UserNickname</span></span>
				<span class=" fs-4 text-start fw-600" style="flex-basis:50%;width:8rem;">地區<span class="ms-2 fw-400  fs-5">@c.CityName</span><span class="ms-2 fw-400  fs-5">@c.RegionName</span></span>
			</div>

			<!-- 內容2. 聯絡方式 -->
			<div class="my-0 ps-4 w-100 d-flex">
				<div class="ps-5 fw-500 fs-6">聯絡方式：</div>
				<div class="px-2">
					@{
						if (c.ContactLine is not null)
						{
							<span class="ps-1 my-0 w-100"><span class="m-0 me-2 d-inline-block"><img src="~/img/icon/line.svg" width="24px" /></span>@c.ContactLine</span>
						}
						if (c.ContactPhone is not null)
						{
							<span class="ps-1 my-0 w-100"><span class="m-0 me-2 d-inline-block"><img src="~/img/icon/phone.svg" width="24px" /></span>@c.ContactPhone</span>
						}
						if (c.ContactOther is not null)
						{
							<div class="ps-1 my-0 w-100"><p class="m-0 me-2 d-inline-block"><img src="~/img/icon/contacts.svg" width="24px" /></p>@c.ContactOther</div>
						}
					}
				</div>
			</div>

			<!-- 內容3. 面交時段 -->
			<div class="d-flex mt-3 ps-4">
				<div class="ps-5 my-0 w-25 fw-600 fs-6">面礁石間：</div>

				<div class="ps-2">
					@{
						if (((IEnumerable<CherishTradeTime>)ViewBag.Mon).Any())
						{
							<div>
								<span class="fw-600 me-2">
									星期一
								</span>
								@foreach (var d in ViewBag.Mon)
								{
									<span class="me-2">@TransText(d.TradeTimeCode)</span>
								}
							</div>
						}
						if (((IEnumerable<CherishTradeTime>)ViewBag.Tue).Any())
						{
							<div>
								<span class="fw-600 me-2">
									星期二
								</span>
								@foreach (var d in ViewBag.Tue)
								{
									<span class="me-2">@TransText(d.TradeTimeCode)</span>
								}
							</div>
						}
						if (((IEnumerable<CherishTradeTime>)ViewBag.Wes).Any())
						{
							<div>
								<span class="fw-600 me-2">
									星期三
								</span>
								@foreach (var d in ViewBag.Wes)
								{
									<span class="me-2">@TransText(d.TradeTimeCode)</span>
								}
							</div>
						}
						if (((IEnumerable<CherishTradeTime>)ViewBag.Thr).Any())
						{
							<div>
								<span class="fw-600 me-2">
									星期四
								</span>
								@foreach (var d in ViewBag.Thr)
								{
									<span class="me-2">@TransText(d.TradeTimeCode)</span>
								}
							</div>
						}
						if (((IEnumerable<CherishTradeTime>)ViewBag.Fri).Any())
						{
							<div>
								<span class="fw-600 me-2">
									星期五
								</span>
								@foreach (var d in ViewBag.Fri)
								{
									<span class="me-2">@TransText(d.TradeTimeCode)</span>
								}
							</div>
						}
						if (((IEnumerable<CherishTradeTime>)ViewBag.Sat).Any())
						{
							<div>
								<span class="fw-600 me-2">
									星期六
								</span>
								@foreach (var d in ViewBag.Sat)
								{
									<span class="me-2">@TransText(d.TradeTimeCode)</span>
								}
							</div>
						}
						if (((IEnumerable<CherishTradeTime>)ViewBag.Sun).Any())
						{
							<div>
								<span class="fw-600 me-2">
									星期日
								</span>
								@foreach (var d in ViewBag.Sun)
								{
									<span class="me-2">@TransText(d.TradeTimeCode)</span>
								}
							</div>
						}



						string TransText(string text)
						{
							switch (Convert.ToInt32(text.Split('-')[1]))
							{
								case 1:
									return "上午";

								case 2:
									return "下午";

								case 3:
									return "晚上";
								default:
									return "";
							}
						}
					}
				</div>



			</div>


		</div>
	</div>

	@* 第四個表頭區塊 *@
	<div class="mt-2">
		<div class="rounded-1 shadow d-flex px-5 py-1 mb-3" style="border:1px solid #aaaaaaa0">
			<h4 class="my-2">3. 良食狀態</h4>
		</div>

		<div class="d-flex">
			<div class="ps-3 d-flex flex-column" style="flex-basis:66%;">
				<h4>惜食狀態圖片</h4>
				<div class="d-flex">
					<div style="flex-basis:50%;"><img src="@($"{Url.Content(c.CherishPhoto)}")" width="240"/></div>
					<div style="flex-basis:50%;"><img src="@(c.OtherPhoto is null ?"/img/icon/EmptyPhoto.png":Url.Content(c.CherishPhoto))" width="240" /></div>
				</div>
			</div>
			<div class=" d-flex flex-column" style="flex-basis:33%;">
				<div>這是右側標題</div>
				<div>圖片</div>
			</div>
		</div>
	</div>














	<div>
		<a asp-action="cherish">返回</a>
	</div>


</div>










